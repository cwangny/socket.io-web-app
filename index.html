<!--Client-->

<!doctype html>
<html lang="en">
    <head>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <!--Socket.io dependencies-->
    <script src="/socket.io/socket.io.js"></script>

    <!--Custom CSS-->
    <link rel="stylesheet" href="static/css/style.css">

    <!--JQuery-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script> 

    <title>Iron Chat</title>
    </head>

    <body>
    <nav>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo">Iron Chat</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a href="sass.html">Sass</a></li>
            <li><a href="badges.html">Components</a></li>
            <li><a href="collapsible.html">JavaScript</a></li>
            </ul>
        </div>
    </nav>

    

    <div class="container">
        <div class="row">
            <div class="col s12">
                <div id="card" class="card-panel teal">
                    <span class="white-text">MESSAGES</span>
                    <ul id="messages"></ul>
                </div>
            </div>
        </div>

        <div id="message-box" class="row">
            <div class="col s11">
                <form>
                    <input id="m">
                </form>
            </div>
            <div class="col s1">
                <button class="btn waves-effect waves-light" name="action">Send</button>
            </div>
        </div>
                          
        
        
            
    <!--END CONTAINER-->
    </div>

    
        

    <!--Socket.io Jquery Scripts-->
    <script>
        $(function () {
            let socket = io();
            $('form').submit(function(e){
                e.preventDefault(); // prevents page reloading
                socket.emit('chat message', $('#m').val());
                $('#m').val('');
                return false;
            });

            //Sending custom events to all users
            socket.on('chat message', function(msg){
                $('#messages').append($('<li>').text(msg));
            });

            //When new user joins 'a user connected' msg is displayed 
            socket.on('connect', function(){
                console.log('a user connected')
                $('#messages').append('<li>A User Connected</li>');
            })

            //When user disconnects 'a user disconnected' msg is shown
            socket.on('disconnect', function(){
                console.log('a user disconnected')
                $('#messages').append('<li>A User Disconnected</li>');
            })

        });
    </script>

    

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    </body>
</html>